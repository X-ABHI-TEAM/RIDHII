<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIDHI Nutrition Store Khurja | Premium Fitness Supplements</title>
    <style>
        /* --- CSS Reset & Basic Styles (No Lag) --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; /* System fonts use karega jo fast hote hain */
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
        }

        /* --- Header Section --- */
        header {
            background: linear-gradient(45deg, #34495e, #2c3e50);
            color: #fff;
            padding: 1rem;
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }

        header h1 {
            font-size: 1.5rem;
            color: #FFD700;
        }

        /* --- Navigation (Category Filter) --- */
        nav {
            background-color: #34495e;
            padding: 0.5rem;
            text-align: center;
            overflow-x: auto;
            white-space: nowrap;
            position: fixed;
            top: 50px;
            left: 0;
            right: 0;
            z-index: 99;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 10px;
            font-size: 0.9rem;
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
        }

        nav a.active {
            background: #FFD700;
            color: #0a0a0a;
        }

        /* --- Main Container --- */
        .container {
            max-width: 1000px;
            margin: 120px auto 20px;
            padding: 20px;
        }

        /* --- Hero Section (Banner) --- */
        .hero {
            background: linear-gradient(rgba(10, 10, 10, 0.9), rgba(18, 18, 18, 0.95)), url('https://images.unsplash.com/photo-1534367507877-0edd93bd013b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 4px;
            margin-top: 10px;
            border: none;
            cursor: pointer;
        }

        .btn-whatsapp {
            background: linear-gradient(45deg, #25D366, #128C7E);
        }

        /* --- Grid Layout for Products --- */
        .grid {
            display: grid;
            gap: 20px;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        .card {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .product-image {
            width: 100%;
            height: 180px;
            object-fit: contain;
            object-position: center;
            border-radius: 8px;
            margin-bottom: 10px;
            background-color: #f0f0f0;
            padding: 10px;
        }

        .price {
            color: #2c3e50;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .mrp {
            text-decoration: line-through;
            color: #999;
            font-size: 0.9rem;
            margin-left: 10px;
        }

        .savings {
            color: #27ae60;
            font-size: 0.9rem;
        }

        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            background-color: #ddd;
            font-size: 0.8rem;
        }

        /* --- Cart Button --- */
        #cart-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        /* --- Mobile Specific Tweaks --- */
        @media (max-width: 600px) {
            header h1 {
                font-size: 1.2rem;
            }
            .hero {
                padding: 20px 10px;
            }
            nav {
                top: 60px;
            }
            .container {
                margin-top: 130px;
            }
        }
    </style>
</head>
<body>
    <header>
    </header>

    <nav id="category-nav">
        <a href="#" class="category-link active" data-category="All">All Products</a>
        <a href="#" class="category-link" data-category="Protein">Protein</a>
        <a href="#" class="category-link" data-category="Multivitamin">Multivitamin</a>
        <a href="#" class="category-link" data-category="Fish Oil">Fish Oil</a>
        <a href="#" class="category-link" data-category="Mass Gainer">Mass Gainer</a>
        <a href="#" class="category-link" data-category="Weight Gainer">Weight Gainer</a>
        <a href="#" class="category-link" data-category="Pre-Workout">Pre-Workout</a>
        <a href="#" class="category-link" data-category="Fat Burner">Fat Burner</a>
        <a href="#" class="category-link" data-category="Creatine">Creatine</a>
        <a href="#" class="category-link" data-category="Oats">Oats</a>
    </nav>

    <div class="container">
        <section class="hero">
            <h2>FUEL YOUR STRENGTH</h2>
            <p>Premium Quality Nutrition Supplements for Bodybuilders and Athletes</p>
            <a href="#products" class="btn">Shop Now</a>
        </section>

        <div id="product-grid" class="grid">
            <!-- Products will be loaded here -->
        </div>
    </div>

    <button id="cart-btn">ðŸ›’ <span id="cart-count">0</span></button>

    <footer>
        <p>&copy; RIDHI Nutrition Store Khurja. All rights reserved.</p>
        <p>+91-9557412283</p>
    </footer>

    <script>
        // Shopping cart array
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let allProducts = [];

        // DOM elements
        const productGrid = document.getElementById('product-grid');
        const categoryLinks = document.querySelectorAll('.category-link');
        const cartBtn = document.getElementById('cart-btn');
        const cartCount = document.getElementById('cart-count');

        // Load products from JSON
        async function loadProducts() {
            try {
                const response = await fetch('./data/products.json');
                allProducts = await response.json();
                renderProducts(allProducts);
            } catch (error) {
                console.error('Error loading products:', error);
                // Fallback products
                allProducts = [
                    {
                        id: 1,
                        name: "Whey Protein 2kg",
                        category: "Protein",
                        price: 2499,
                        mrp: 2999,
                        offer: true,
                        mostSelling: true,
                        image: "https://i.ibb.co/Mx6LwRym/1.jpg"
                    },
                    {
                        id: 2,
                        name: "Multivitamin Complex",
                        category: "Multivitamin",
                        price: 2649,
                        mrp: 6600,
                        offer: false,
                        mostSelling: false,
                        image: "https://i.ibb.co/nMQKXMGq/2.jpg"
                    }
                ];
                renderProducts(allProducts);
            }
        }

        // Render products to grid
        function renderProducts(products) {
            productGrid.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'card';
                
                const imageUrl = product.image || 'https://via.placeholder.com/300x300';
                
                productCard.innerHTML = `
                    <img src="${imageUrl}" alt="${product.name}" class="product-image">
                    <h3>${product.name}</h3>
                    <div class="price">â‚¹${product.price.toLocaleString('en-IN')} 
                        ${product.offer ? `<span class="mrp">â‚¹${product.mrp.toLocaleString('en-IN')}</span>` : ''}
                    </div>
                    ${product.offer ? `<div class="savings">You save â‚¹${(product.mrp - product.price).toLocaleString('en-IN')}</div>` : ''}
                    <button class="btn add-to-cart" data-id="${product.id}">Add to Cart</button>
                    <button class="btn btn-whatsapp buy-now" data-name="${product.name}">Buy Now</button>
                `;
                
                productGrid.appendChild(productCard);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.currentTarget.getAttribute('data-id'));
                    const product = allProducts.find(p => p.id === productId);
                    addToCart(product);
                    showAlert(`${product.name} added to cart!`);
                });
            });
            
            document.querySelectorAll('.buy-now').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productName = e.currentTarget.getAttribute('data-name');
                    buyOnWhatsApp(productName);
                });
            });
        }

        // Filter products by category
        function filterProductsByCategory(category) {
            let filteredProducts = [];
            
            if (category === 'All') {
                filteredProducts = allProducts;
            } else {
                filteredProducts = allProducts.filter(product => product.category.toLowerCase() === category.toLowerCase());
            }
            
            renderProducts(filteredProducts);
            
            // Update active category link
            categoryLinks.forEach(link => {
                if (link.getAttribute('data-category') === category) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }

        // Add to cart function
        function addToCart(product) {
            const existingItem = cart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }

        // Update cart count display
        function updateCartCount() {
            const count = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = count;
        }

        // Buy on WhatsApp
        function buyOnWhatsApp(productName) {
            const phoneNumber = '919557412283';
            const message = `Hello, I am interested in buying ${productName}.`;
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Show alert
        function showAlert(message) {
            const alert = document.createElement('div');
            alert.textContent = message;
            alert.style.cssText = `
                position: fixed;
                top: 70px;
                right: 20px;
                background: #3498db;
                color: white;
                padding: 10px 15px;
                border-radius: 4px;
                z-index: 1000;
                font-size: 0.9rem;
            `;
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 3000);
        }
        
        // Show cart modal
        function showCart() {
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            
            // Create cart modal
            const modal = document.createElement('div');
            modal.className = 'cart-modal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1001; display: flex; justify-content: center; align-items: center;';
            
            let modalContent = '<div style="background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px; max-height: 80vh; overflow-y: auto; position: relative;">' +
                '<h2 style="margin-top: 0; color: #2c3e50;">Your Cart</h2>' +
                '<div class="cart-items">';
            
            cart.forEach(item => {
                modalContent += '<div class="cart-item" style="display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #eee;" data-id="' + item.id + '">' +
                    '<div>' +
                        '<h4>' + item.name + '</h4>' +
                        '<p>â‚¹' + item.price.toLocaleString('en-IN') + ' x </p>' +
                    '</div>' +
                    '<div style="display: flex; align-items: center; gap: 10px;">' +
                        '<button class="quantity-btn" style="width: 30px; height: 30px; border-radius: 50%; border: 1px solid #ddd; background: #f8f9fa; cursor: pointer; display: flex; align-items: center; justify-content: center;" onclick="updateQuantity(' + item.id + ', -1)">-</button>' +
                        '<span class="quantity" style="margin: 0 5px;">' + item.quantity + '</span>' +
                        '<button class="quantity-btn" style="width: 30px; height: 30px; border-radius: 50%; border: 1px solid #ddd; background: #f8f9fa; cursor: pointer; display: flex; align-items: center; justify-content: center;" onclick="updateQuantity(' + item.id + ', 1)">+</button>' +
                        '<button class="remove-btn" style="width: 30px; height: 30px; border-radius: 50%; border: 1px solid #e74c3c; background: #e74c3c; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; margin-left: 10px;" onclick="removeFromCart(' + item.id + ')">X</button>' +
                        '<p style="margin: 0 10px 0 15px;">â‚¹' + (item.price * item.quantity).toLocaleString('en-IN') + '</p>' +
                    '</div>' +
                '</div>';
            });
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            modalContent += '</div>' +
                '<div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #eee; font-weight: bold;">' +
                    '<h3>Total: â‚¹' + total.toLocaleString('en-IN') + '</h3>' +
                '</div>' +
                '<div style="margin-top: 20px; text-align: center;">' +
                    '<button id="order-now-btn" class="btn" style="margin-right: 10px;">Order Now</button>' +
                    '<button id="close-cart-btn" style="background: #95a5a6; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Close</button>' +
                '</div>' +
            '</div>';
            
            modal.innerHTML = modalContent;
            document.body.appendChild(modal);
            
            // Add event listeners to the modal buttons
            document.getElementById('order-now-btn').addEventListener('click', showOrderForm);
            document.getElementById('close-cart-btn').addEventListener('click', () => {
                document.querySelector('.cart-modal').remove();
            });
        }
        
        // Update quantity function
        function updateQuantity(productId, change) {
            const itemIndex = cart.findIndex(item => item.id === productId);
            
            if (itemIndex !== -1) {
                cart[itemIndex].quantity += change;
                
                // Remove item if quantity becomes 0
                if (cart[itemIndex].quantity <= 0) {
                    cart.splice(itemIndex, 1);
                }
                
                // Update cart in localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update cart count display
                updateCartCount();
                
                // Refresh the cart modal
                document.querySelector('.cart-modal').remove();
                showCart();
            }
        }
        
        // Remove item from cart function
        function removeFromCart(productId) {
            const itemIndex = cart.findIndex(item => item.id === productId);
            
            if (itemIndex !== -1) {
                // Remove item from cart
                cart.splice(itemIndex, 1);
                
                // Update cart in localStorage
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // Update cart count display
                updateCartCount();
                
                // Refresh the cart modal
                document.querySelector('.cart-modal').remove();
                showCart();
            }
        }
        
        // Show order form
        function showOrderForm() {
            // Remove the cart modal
            document.querySelector('.cart-modal').remove();
            
            // Create order form modal
            const orderModal = document.createElement('div');
            orderModal.className = 'order-modal';
            orderModal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1001; display: flex; justify-content: center; align-items: center;';
            
            const orderFormContent = '<div style="background: white; padding: 20px; border-radius: 8px; width: 90%; max-width: 500px;">' +
                    '<h2 style="margin-top: 0; color: #2c3e50;">Order Details</h2>' +
                    '<form id="order-form">' +
                        '<div style="margin-bottom: 15px;">' +
                            '<label style="display: block; margin-bottom: 5px;">Full Name *</label>' +
                            '<input type="text" id="customer-name" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">' +
                        '</div>' +
                        '<div style="margin-bottom: 15px;">' +
                            '<label style="display: block; margin-bottom: 5px;">Mobile Number *</label>' +
                            '<input type="tel" id="customer-phone" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;">' +
                        '</div>' +
                        '<div style="margin-bottom: 15px;">' +
                            '<label style="display: block; margin-bottom: 5px;">Delivery Address *</label>' +
                            '<textarea id="customer-address" required rows="3" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px;"></textarea>' +
                        '</div>' +
                        '<div style="margin-top: 20px; text-align: center;">' +
                            '<button type="submit" class="btn">Place Order on WhatsApp</button>' +
                            '<button type="button" id="cancel-order-btn" style="background: #95a5a6; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-left: 10px;">Cancel</button>' +
                        '</div>' +
                    '</form>' +
                '</div>';
            
            orderModal.innerHTML = orderFormContent;
document.body.appendChild(orderModal);

// Add event listeners to the form
document.getElementById('order-form').addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Values lena
    const name = document.getElementById('customer-name').value;
    const phone = document.getElementById('customer-phone').value;
    const address = document.getElementById('customer-address').value;
    const currentCart = JSON.parse(localStorage.getItem('cart')) || [];
    
    // Message create karna (Template Literals ka use karke)
    let orderMessage = `*New Order Request* ðŸ“¦\n\n`;
    orderMessage += `ðŸ‘¤ *Name:* ${name}\n`;
    orderMessage += `ðŸ“ž *Mobile:* ${phone}\n`;
    orderMessage += `ðŸ“ *Address:* ${address}\n\n`;
    
    orderMessage += `*Order Details:*\n------------------\n`;
    
    let total = 0;
    
    // Items add karna (Short aur Clear format)
    currentCart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        
        // Product Line: Name (xQuantity) = Total
        orderMessage += `ðŸ”¹ ${item.name} (x${item.quantity})\n`;
        orderMessage += `   Price: â‚¹${itemTotal.toLocaleString('en-IN')}\n`;
    });
    
    orderMessage += `------------------\n`;
    orderMessage += `ðŸ’° *Grand Total: â‚¹${total.toLocaleString('en-IN')}*\n`;
    
    // WhatsApp open karna
    // encodeURIComponent jaruri hai taaki spaces aur new lines sahi se kaam kare
    const whatsappUrl = `https://wa.me/919557412283?text=${encodeURIComponent(orderMessage)}`;
    window.open(whatsappUrl, '_blank');

                // Clear cart after order
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                
                // Close the modal
                document.querySelector('.order-modal').remove();
            });
            
            document.getElementById('cancel-order-btn').addEventListener('click', () => {
                document.querySelector('.order-modal').remove();
            });
        }

        // Event listeners
        categoryLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const category = link.getAttribute('data-category');
                filterProductsByCategory(category);
            });
        });

        cartBtn.addEventListener('click', showCart);

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            loadProducts();
            updateCartCount();
            
            // Ensure 'All Products' category is selected by default and show all products
            setTimeout(() => {
                const allProductsLink = document.querySelector('.category-link[data-category="All"]');
                if (allProductsLink) {
                    allProductsLink.classList.add('active');
                    // Trigger the 'All Products' filter to show all products on load
                    filterProductsByCategory('All');
                }
            }, 100);
        });
    </script>
</body>
</html>
